---
author: Kent Hua
blogger_id: tag:blogger.com,1999:blog-3324719914062696225.post-2678354154551193790
blogger_orig_url: http://blog.kenthua.com/2015/09/jboss-eap-6x-creating-quick-domain-with.html
comments: true
date: "2015-09-01T16:25:00Z"
modified_time: "2016-03-09T10:39:04.949-08:00"
tags: null
title: JBoss EAP 6.x - Creating a quick domain with a few hosts
---

This example guide was tested / created using EAP 6.4.3<br /><br />Quickly setup EAP in Domain<br /><br />Single host (OS)<br />1 - Domain Controller<br />2 - Nodes<br /><b><br /></b><b>Domain</b><br />Change the host config, (if you do not change then command line domain.sh --host-config=host-master.xml<br /><pre><code class="bash"><br />mv host-master.xml host.xml<br /></code></pre><br />Note: If using HA profiles, hornetq cluster admin/password need to be set (can be done in Web Console as well) — not the same as the account created by ./add-user.sh<br />Note: If multiple profiles using hornetq ha, then user &amp; password both must be unique<br />Add cluster-user element, it may not already be in the config<br />This add the "&lt;cluster-user&gt;" to the domain.xml, above "&lt;cluster-password&gt;"<br /><pre><code class="xml"><br />&lt;cluster-user&gt;admin&lt;/cluster-user&gt;<br />&lt;cluster-password&gt;passw0rd!&lt;/cluster-password&gt;<br /></code></pre><br />Add admin management user (web console) i.e. admin<br /><br /><pre><code class="bash"><br />./add-user.sh<br /></code></pre><br />Add domain management user, i.e. mgmt<br /><br /><pre><code class="bash"><br />./add-user.sh<br /></code></pre><br />&nbsp; &nbsp; &nbsp;Answer “yes” to below:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>Is&nbsp;this&nbsp;new&nbsp;user&nbsp;going&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;one&nbsp;AS&nbsp;process&nbsp;to&nbsp;connect&nbsp;to&nbsp;another&nbsp;AS&nbsp;process?&nbsp; e.g.&nbsp;for&nbsp;a&nbsp;slave &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;host&nbsp;controller&nbsp;connecting&nbsp;to&nbsp;the&nbsp;master&nbsp;or&nbsp;for&nbsp;a&nbsp;Remoting&nbsp;connection&nbsp;for&nbsp;server&nbsp;to&nbsp;server&nbsp;EJB&nbsp;calls.</i><br /><i><br /></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;To&nbsp;represent&nbsp;the&nbsp;user for the host add&nbsp;the&nbsp;following&nbsp;to&nbsp;the&nbsp;server-identities&nbsp;definition<br /><pre><code class="xml"><br />&lt;secret&nbsp;value="cGFzc3cwcmQh"&nbsp;/&gt;<br /></code></pre><br /><b>Node (repeat for each node, separate folder or server)&nbsp;</b><br /><br />Change the host config<br /><pre><code class="bash"><br />mv host-slave.xml host.xml<br /></code></pre><br />Modify host.xml to add name attribute<br /><pre><code class="xml"><br />&lt;host&nbsp;name="host1"&nbsp;xmlns="urn:jboss:domain:1.7"&gt;<br /></code></pre><br />Modify host.xml server identity secret (use the secret created for the domain, i.e. mgmt user)<br /><pre><code class="xml"><br />&lt;secret&nbsp;value="cGFzc3cwcmQh"/&gt;<br /></code></pre><br />Modify node host controller management interface port, increment by 1000 for each host if on the same OS<br /><pre><code class="xml"><br />&lt;socket&nbsp;interface="management"&nbsp;port="${jboss.management.native.port:10999}"/&gt;<br /></code></pre><br /><b>Starting the environment</b><br /><br />Domain<br />Start the domain controller by running "domain.sh" each<br /><br />Node(s)<br />Start each node by running "domain.sh&nbsp;-Djboss.domain.master.address=&lt;DOMAIN_IP&gt;"<br /><br /><br /><b>Notes</b><br />When adding a server group, specifying for instance full-ha profile and using standard-sockets will result in an error because the full-ha profile needs additional socket bindings which aren’t defined in standard-sockets<br /><br />Changing the server group socket binding, is not reflected in previously created server definitions on the host, need to manually edit those<br /><br />To properly remove/clear up a server group, remove each server definition from each host, then remove the server group <br /><br />I also noticed when using mod_cluster with Apache httpd. &nbsp;Multicast / advertise feature seems to have issues connecting when using OpenJDK 1.8 on RHEL7. &nbsp;With OpenJDK 1.7 on RHEL7, it appears to work fine. &nbsp;For either version, proxy-list will work regardless of OpenJDK version.