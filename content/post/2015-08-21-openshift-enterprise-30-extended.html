---
author: Kent Hua
blogger_id: tag:blogger.com,1999:blog-3324719914062696225.post-2661151056277128262
blogger_orig_url: http://blog.kenthua.com/2015/08/openshift-enterprise-30-extended.html
comments: true
date: "2015-08-21T11:25:00Z"
modified_time: "2015-08-21T11:26:36.960-07:00"
tags: null
title: OpenShift Enterprise 3.0 - Extended builder image for gradle and gradle source
  build via source to image (S2I)
---

At the moment, OpenShift supports pom.xml (maven) as the mechanism for building java applications from Source to Image (S2I). &nbsp;Sometimes organizations may leverage other build tools that are not maven based.<br /><br />So the first step was to extend the jboss-eap-openshift image to support gradle as well. &nbsp;At the moment, the builder and runtime image are the same for EAP. &nbsp;So I extended the jboss-eap-openshift image and created a script to install gradle onto the image so that it can be called upon when needed.<br /><br />I leveraged <a href="https://hub.docker.com/r/kenthua/ose-eap-extra/">docker hub</a> as the image repository and <a href="https://github.com/kenthua/ose-eap-extra">github</a> as the source repository. &nbsp;In the github repo are also OSE stream and template configurations which can be applied for openshift to take advantage of the image in docker hub. &nbsp;Also instructions on how to run through an example. &nbsp;Of course you'll have to create your own or fork if you want to make updates to see what happens.<br /><br />For this specific scenario I also used what I created in my previous blog post for my web application which uses gradle for building. &nbsp;The source to the repo for the <a href="https://github.com/kenthua/kitchensink-gradle">kitchensink-gradle</a>.<br /><br />In this source, in addition to having a build.gradle rather than a pom.xml, is the .sti/bin/assemble script which is used to execute the actual build. &nbsp;I took the original assemble script used for the maven build located inside the jboss-eap-openshift image and added an additional condition checking for a build.gradle file. <br /><br />This is just a test and experiment, your experiences may vary. &nbsp;Such as having a pom.xml and build.gradle in the same repo. &nbsp;It's going to try and execute both builds because all I do is check for the existing of the build.gradle file, but left the maven pom.xml check alone. &nbsp;I can probably take it out, since it's unique to the kitchensink-gradle project.<br /><br />The sti run script remains the same, so no reason to extend/replace it.<br /><br />In this example I also used it as an opportunity to leverage the <a href="https://github.com/openshift/source-to-image">sti</a> tool to do my testing before I actually applied a build directly with openshift. &nbsp;A quick way to test things. &nbsp;I wasn't able to do a docker run because the jboss-eap-openshift has dependencies on other components such as the eap-ping tester.<br /><br />As usual, all instructions and additional descriptions are available in the respective github repo readme.<br /><br /><br /><br /><br />